import projutils.color as color
import projutils.tileset as tileset
import projutils.tilemap as tilemap

FILES = [
    'Arderial',
    'Cald',
    'CaldGeyser',
    'Core',
    'Naroom',
    'NaroomGeyser',
    'Orothe',
    'OrotheGeyser',
    'OrotheStarfish',
    'OrotheTunnels',
    'Shadowhold',
    'Underneath',
    'UnderneathGeyser',
    'UnderneathTunnels',
]

AUTOGENERATED = 'autogenerated/'
BASEPATH = 'assets/fightscene/arena/'
PAL = '.pal'

for file in FILES:
    palette_top = color.Palette.init_from_processed_file(AUTOGENERATED + BASEPATH + file + '/' + file + PAL)
    palette_bottom = color.Palette.init_from_processed_file(AUTOGENERATED + BASEPATH + file + '/' + file + PAL)
    bitmap_top = tileset.Bitmap.init_from_processed_file(AUTOGENERATED + BASEPATH + file + '/' + file + 'Top.tileset.rle', 0x10, 0x4)
    tilemap_top = tilemap.Tilemap.init_from_processed_file(AUTOGENERATED + BASEPATH + file + '/' + file + 'Top.tilemap.rle')
    attrmap_top = tilemap.Tilemap.init_from_processed_file(AUTOGENERATED + BASEPATH + file + '/' + file + 'Top.attrmap.rle')
    bitmap_bottom = tileset.Bitmap.init_from_processed_file(AUTOGENERATED + BASEPATH + file + '/' + file + 'Bottom.tileset.rle', 0x10, 0x4)
    tilemap_bottom = tilemap.Tilemap.init_from_processed_file(AUTOGENERATED + BASEPATH + file + '/' + file + 'Bottom.tilemap.rle')
    attrmap_bottom = tilemap.Tilemap.init_from_processed_file(AUTOGENERATED + BASEPATH + file + '/' + file + 'Bottom.attrmap.rle')
    bitmap_top.colorize_from_tilemap(
        tilemap_top,
        attrmap_top,
        0,
        0x9000,
        palette_top,
        0,
        True,
        0
    )
    bitmap_bottom.colorize_from_tilemap(
        tilemap_bottom,
        attrmap_bottom,
        0,
        0x9000,
        palette_bottom,
        0,
        True,
        0
    )
    bitmap_top.save_original_file(BASEPATH + file + '/' + file + 'Top.tileset.png')
    bitmap_bottom.save_original_file(BASEPATH + file + '/' + file + 'Bottom.tileset.png')